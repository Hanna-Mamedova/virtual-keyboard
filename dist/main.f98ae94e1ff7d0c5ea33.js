(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","ShiftLeft","z","x","c","v","b","n","m",",",".","/","up","ShiftRight","CtrlLeft","Win","AltLeft","Space","AltRight","left","down","right","CtrlRight"],i=["`","1","2","3","4","5","6","7","8","9","0","-","=","[","]","\\",";","'",",",".","/"],r=["~","!","@","#","$","%","^","&","*","(",")","_","+","{","}","|",":",'"',"<",">","?"],o=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","\\","Del","CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","ShiftLeft","я","ч","с","м","и","т","ь","б","ю",".","up","ShiftRight","CtrlLeft","Win","AltLeft","space","AltRight","left","down","right","CtrlRight"];function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){function t(n){e(this,t),this.keyElement="",this.value=n,this.shift="false"}return n(t,[{key:"init",value:function(){this.keyElement=document.createElement("button"),this.keyElement.setAttribute("type","button"),this.keyElement.classList.add("keyboard__key")}},{key:"isActive",value:function(){this.keyElement.classList.add("keyboard__key--active")}},{key:"removeActive",value:function(){this.keyElement.classList.remove("keyboard__key--active")}},{key:"createSpecialKey",value:function(e,t,n){var a;(a=this.keyElement.classList).add.apply(a,s(e)),this.keyElement.innerHTML=t,this.value=n}},{key:"onShift",value:function(){this.shift=!this.shift,i.includes(this.value)&&(this.keyElement.textContent=r[i.indexOf(this.keyElement.textContent)])}}]),t}();function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d=new(function(){function t(){e(this,t),this.main="",this.keysContainer="",this.keys=[],this.value="",this.language="eng",this.capsLock=!1,this.shift=!1,this.oninput=null}return n(t,[{key:"init",value:function(){this.main=document.createElement("div"),this.keysContainer=document.createElement("div"),this.main.classList.add("keyboard"),this.keysContainer.classList.add("keyboard__keys"),this.keysContainer.append(this.createKeys()),this.keys=this.keysContainer.querySelectorAll(".keyboard__key"),this.main.append(this.keysContainer),document.body.append(this.main),this.onInput("",(function(e){document.querySelector("textarea").value=e}))}},{key:"createKeys",value:function(){var e=this,t=document.createDocumentFragment(),n=[];return"eng"==this.language?n=a:"rus"==this.language&&(n=o),n.forEach((function(n){var a=new l(n);a.init();var i=a.keyElement,r=-1!==["Backspace","DEL","ENTER","ShiftRight","&#9658;"].indexOf(n);switch(n){case"Backspace":a.createSpecialKey(["keyboard__key-special-wide"],"Backspace","Backspace"),i.addEventListener("click",(function(){e.value=e.value.substring(0,e.value.length-1),e.triggerEvent(e.oninput)}));break;case"Tab":a.createSpecialKey(["keyboard__key-special"],"Tab","Tab"),i.addEventListener("click",(function(){e.value+="    ",e.triggerEvent(e.oninput)}));break;case"Del":a.createSpecialKey(["keyboard__key-special"],"Del","Delete"),i.addEventListener("click",(function(){e.triggerEvent(e.oninput)}));break;case"Caps Lock":a.createSpecialKey(["keyboard__key-special-wide"],"Caps Lock","CapsLock"),i.addEventListener("click",(function(){e.toggleCapsLock(),console.log("PRESS",e.capsLock)}));break;case"Enter":a.createSpecialKey(["keyboard__key-special-wide"],"ENTER","Enter"),i.addEventListener("click",(function(){e.value+="\n",e.triggerEvent(e.oninput)}));break;case"ShiftRight":a.createSpecialKey(["keyboard__key-special-wide"],"Shift","ShiftRight"),i.addEventListener("mousedown",(function(){e.toggleShift()})),i.addEventListener("mouseup",(function(){e.toggleShift()}));break;case"ShiftLeft":a.createSpecialKey(["keyboard__key-special-wide"],"Shift","ShiftLeft"),i.addEventListener("mousedown",(function(){e.toggleShift()})),i.addEventListener("mouseup",(function(){e.toggleShift()}));break;case"Space":a.createSpecialKey(["keyboard__key-space"],"","Space"),i.addEventListener("click",(function(){e.value+=" ",e.triggerEvent(e.oninput)}));break;case"up":a.createSpecialKey(["keyboard__key-special"],"&#9650","ArrowUp"),i.addEventListener("click",(function(){}));break;case"down":a.createSpecialKey(["keyboard__key-special"],"&#9660","ArrowDown"),i.addEventListener("click",(function(){}));break;case"left":a.createSpecialKey(["keyboard__key-special"],"&#9668","ArrowLeft"),i.addEventListener("click",(function(){}));break;case"right":a.createSpecialKey(["keyboard__key-special"],"&#9658","ArrowRight"),i.addEventListener("click",(function(){}));break;case"CtrlLeft":a.createSpecialKey(["keyboard__key-special"],"ctrl","ControlLeft");break;case"CtrlRight":a.createSpecialKey(["keyboard__key-special"],"ctrl","ControlRight");break;case"AltLeft":a.createSpecialKey(["keyboard__key-special"],"alt","AltLeft");break;case"AltRight":a.createSpecialKey(["keyboard__key-special"],"alt","AltRight");break;case"Win":a.createSpecialKey(["keyboard__key-special"],"win","Meta");break;default:a.value=n.toLowerCase(),i.textContent=a.value,i.classList.add("changeCase"),i.addEventListener("click",(function(){e.value+=e.capsLock?n.toUpperCase():n.toLowerCase(),e.triggerEvent(e.oninput)}))}window.addEventListener("keydown",(function(t){t.key!=a.value&&t.code!=a.value||a.isActive(),"CapsLock"==t.key&&(e.toggleCapsLock(),console.log("CAPSLOCK--",e.capsLock))})),window.addEventListener("keyup",(function(){i.classList.contains("keyboard__key--active")&&a.removeActive()})),t.append(i),r&&t.append(document.createElement("br"))})),t}},{key:"triggerEvent",value:function(e){"function"==typeof e&&e(this.value)}},{key:"onInput",value:function(e,t){this.value=e||"",this.oninput=t}},{key:"onChangeCase",value:function(){var e,t=u(this.keys);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.classList.contains("changeCase")&&(n.textContent=this.capsLock?n.textContent.toUpperCase():n.textContent.toLowerCase())}}catch(e){t.e(e)}finally{t.f()}}},{key:"toggleCapsLock",value:function(){this.capsLock=!this.capsLock,this.onChangeCase()}},{key:"toggleShift",value:function(){this.shift=!this.shift,this.toggleCapsLock()}},{key:"switchLanguage",value:function(){}}]),t}());function f(e,t,n){(e=document.createElement(t)).innerHTML=n,document.body.append(e)}window.onload=function(){f("TITLE","h1","VIRTUAL KEYBOARD"),function(){var e=document.createElement("div");e.classList.add("textarea__container");var t=document.createElement("textarea");t.name="textarea",t.className="textarea use-keyboard-input",t.cols=50,t.rows=10,e.append(t),document.body.append(e)}(),d.init(),f("SUBTITLE","h3","Keyboard created on Windows"),f("LANGUAGE","h3","For language switch: shift + alt"),f("LANGUAGE_NOW","h3","Language now:")}})();